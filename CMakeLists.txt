cmake_minimum_required(VERSION 3.13.0)
project(Chesscade)
set(SOLIB ${PROJECT_BINARY_DIR}/libChesscadeLib.so)
set(WINLIB ${PROJECT_BINARY_DIR}/ChesscadeLib.dll)
include_directories(private)
add_library(ChesscadeLib SHARED)
target_include_directories(ChesscadeLib PUBLIC public)
target_sources(ChesscadeLib PUBLIC public/api.cpp PRIVATE private/model.c rules.h)
file(COPY assets DESTINATION ${PROJECT_SOURCE_DIR}/pygame_frontend)
IF(0)
IF(WIN32) # Command line app currently only works on Windows, and is turned off because the .exe sometimes makes Windows Defender anxious.
IF(WIN32)
ELSE()
find_package(Curses REQUIRED)
include_directories(${CURSES_INCLUDE_DIR})
ENDIF()
add_executable(ChesscadeApp)
target_sources(ChesscadeApp PRIVATE private/main.c private/model.c private/view.c private/control.c private/platform.c rules.h)
target_link_libraries(ChesscadeApp ${CURSES_LIBRARIES})
install(TARGETS ChesscadeApp DESTINATION bin)
ENDIF()
IF(EXISTS ${SOLIB})
file(COPY ${SOLIB} DESTINATION ${PROJECT_SOURCE_DIR}/pygame_frontend/bin)
ENDIF()
IF(EXISTS ${WINLIB})
file(COPY ${WINLIB} DESTINATION ${PROJECT_SOURCE_DIR}/pygame_frontend/bin)
ENDIF()
ENDIF()